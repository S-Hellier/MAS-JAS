{
  "info": {
    "name": "Pantry API Tests",
    "description": "Comprehensive test collection for the Pantry Management API",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:3001/api/v1",
      "type": "string"
    },
    {
      "key": "userId",
      "value": "816614f4-b6eb-4806-9e87-0ed87d62c317",
      "type": "string"
    },
    {
      "key": "itemId",
      "value": "",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "Health Check",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "http://localhost:3001/health",
          "host": ["http://localhost:3001"],
          "path": ["health"]
        }
      }
    },
    {
      "name": "Get All Items",
      "request": {
        "method": "GET",
        "header": [
          {
            "key": "x-user-id",
            "value": "{{userId}}"
          }
        ],
        "url": {
          "raw": "{{baseUrl}}/pantry",
          "host": ["{{baseUrl}}"],
          "path": ["pantry"]
        }
      }
    },
    {
      "name": "Create Item - Bananas",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "if (pm.response.code === 201) {",
              "    const response = pm.response.json();",
              "    if (response.data && response.data.id) {",
              "        pm.collectionVariables.set('itemId', response.data.id);",
              "    }",
              "}"
            ]
          }
        }
      ],
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          },
          {
            "key": "x-user-id",
            "value": "{{userId}}"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"name\": \"Organic Bananas\",\n  \"brand\": \"Whole Foods\",\n  \"quantity\": 6,\n  \"unit\": \"pieces\",\n  \"category\": \"produce\",\n  \"expirationDate\": \"2024-01-20\",\n  \"nutritionInfo\": {\n    \"calories\": 105,\n    \"protein\": 1.3,\n    \"carbohydrates\": 27,\n    \"fat\": 0.4,\n    \"fiber\": 3.1,\n    \"sugar\": 14.4,\n    \"sodium\": 1,\n    \"servingSize\": \"1\",\n    \"servingUnit\": \"medium banana\"\n  },\n  \"barcode\": \"1234567890123\",\n  \"notes\": \"Perfect ripeness for smoothies\"\n}"
        },
        "url": {
          "raw": "{{baseUrl}}/pantry",
          "host": ["{{baseUrl}}"],
          "path": ["pantry"]
        }
      }
    },
    {
      "name": "Create Item - Yogurt",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          },
          {
            "key": "x-user-id",
            "value": "{{userId}}"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"name\": \"Greek Yogurt\",\n  \"brand\": \"Chobani\",\n  \"quantity\": 4,\n  \"unit\": \"pieces\",\n  \"category\": \"dairy\",\n  \"expirationDate\": \"2024-01-25\",\n  \"nutritionInfo\": {\n    \"calories\": 100,\n    \"protein\": 15,\n    \"carbohydrates\": 6,\n    \"fat\": 0,\n    \"fiber\": 0,\n    \"sugar\": 4,\n    \"sodium\": 50,\n    \"servingSize\": \"1\",\n    \"servingUnit\": \"container\"\n  },\n  \"barcode\": \"5555555555555\"\n}"
        },
        "url": {
          "raw": "{{baseUrl}}/pantry",
          "host": ["{{baseUrl}}"],
          "path": ["pantry"]
        }
      }
    },
    {
      "name": "Get Items by Category",
      "request": {
        "method": "GET",
        "header": [
          {
            "key": "x-user-id",
            "value": "{{userId}}"
          }
        ],
        "url": {
          "raw": "{{baseUrl}}/pantry?category=dairy",
          "host": ["{{baseUrl}}"],
          "path": ["pantry"],
          "query": [
            {
              "key": "category",
              "value": "dairy"
            }
          ]
        }
      }
    },
    {
      "name": "Get Items Expiring Soon",
      "request": {
        "method": "GET",
        "header": [
          {
            "key": "x-user-id",
            "value": "{{userId}}"
          }
        ],
        "url": {
          "raw": "{{baseUrl}}/pantry/expiring?days=7",
          "host": ["{{baseUrl}}"],
          "path": ["pantry", "expiring"],
          "query": [
            {
              "key": "days",
              "value": "7"
            }
          ]
        }
      }
    },
    {
      "name": "Search Items",
      "request": {
        "method": "GET",
        "header": [
          {
            "key": "x-user-id",
            "value": "{{userId}}"
          }
        ],
        "url": {
          "raw": "{{baseUrl}}/pantry?search=banana",
          "host": ["{{baseUrl}}"],
          "path": ["pantry"],
          "query": [
            {
              "key": "search",
              "value": "banana"
            }
          ]
        }
      }
    },
    {
      "name": "Get Single Item",
      "request": {
        "method": "GET",
        "header": [
          {
            "key": "x-user-id",
            "value": "{{userId}}"
          }
        ],
        "url": {
          "raw": "{{baseUrl}}/pantry/{{itemId}}",
          "host": ["{{baseUrl}}"],
          "path": ["pantry", "{{itemId}}"]
        }
      }
    },
    {
      "name": "Update Item",
      "request": {
        "method": "PUT",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          },
          {
            "key": "x-user-id",
            "value": "{{userId}}"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"quantity\": 3,\n  \"notes\": \"Updated quantity - used some for smoothies\"\n}"
        },
        "url": {
          "raw": "{{baseUrl}}/pantry/{{itemId}}",
          "host": ["{{baseUrl}}"],
          "path": ["pantry", "{{itemId}}"]
        }
      }
    },
    {
      "name": "Check Barcode Exists",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{baseUrl}}/pantry/barcode/1234567890123",
          "host": ["{{baseUrl}}"],
          "path": ["pantry", "barcode", "1234567890123"]
        }
      }
    },
    {
      "name": "Delete Item",
      "request": {
        "method": "DELETE",
        "header": [
          {
            "key": "x-user-id",
            "value": "{{userId}}"
          }
        ],
        "url": {
          "raw": "{{baseUrl}}/pantry/{{itemId}}",
          "host": ["{{baseUrl}}"],
          "path": ["pantry", "{{itemId}}"]
        }
      }
    }
  ]
}
